<?xml version="1.0" encoding="UTF-8" ?>

<doc>
<title>ステートメントとブロック</title>

<para>
<ptitle>ステートメントとブロック</ptitle>
　TJS2 の大きな文法の構成要素としてステートメントとブロックがあります。<r/>
</para>

<para>
<ptitle>ステートメント</ptitle>
　ステートメントは、<kw>;</kw> (セミコロン) で終わるものです。式の後ろにそのままセミコロンがついたものもあれば、if 等の制御構文の後にセミコロンが付いたものもあります。<r/>
<example>
	a++;<r/>
	func1();<r/>
	return a+b;<r/>
	などなど<r/>
</example>
</para>

<para>
<ptitle>ブロック</ptitle>
　ブロックは、ステートメントを <kw>{ }</kw> の間に複数書き、まとめたものです。ステートメントは上から下へ実行されます。<r/>
<example>
	{<r/>
		a++;<r/>
		b++;<r/>
	}<r/>
<r/>
	{<r/>
		var t=func1();<r/>
		func2(t);<r/>
		break;<r/>
	}<r/>
</example>
<r/>
　ブロックの次には ; (セミコロン) は必要ありません。<r/>
<r/>
　また、すべてのブロックは、変数の<kw>スコープ</kw>を生成します。<r/>
</para>

<para>
<ptitle>実行順序</ptitle>
　TJS では、関数、クラス、プロパティ以外の部分に書かれたステートメントは、スクリプトが実行されるとともに実行されます。関数、クラス、プロパティの中のステートメントは呼び出されるまで実行されません。<r/>
<example>
	var a; // すぐに実行される<r/>
<r/>
	function test()<r/>
	{<r/>
		a+=10; // 呼び出されるまで実行されない<r/>
	}<r/>
<r/>
	a+=30; // すぐに実行される<r/>
</example>
<r/>
　より正確には、クラスの定義、関数の定義、プロパティの定義はスクリプトが実行されるとまず一番最初に登録され、そのあと、それ以外のスクリプトの要素が先頭から実行されます。そのため、関数、クラス、プロパティは、同じスクリプトブロック内では後方参照が可能です。<r/>
<example>
	test(); // この位置よりも後ろに宣言された関数でも、同じスクリプトブロック内ならば参照される<r/>
<r/>
	function test()<r/>
	{<r/>
		inform("yah!");<r/>
	}<r/>
</example>
<r/>
　違うスクリプトブロック間での関数などの呼び出しは、関数呼び出しをしようとした時点で、その対象の関数が読み込まれた状態になっていれば可能です。<r/>
　また、変数の宣言は、読み込まれた順番に処理されていくので、後方参照はできません。<r/>
</para>

<para>
<ptitle>グローバルオブジェクト</ptitle>
　グローバルオブジェクトは特殊なオブジェクトで、グローバルな位置(広域位置)で宣言された変数や関数、プロパティなどをメンバとして持つオブジェクトです。global キーワードでアクセスできます。<r/>
</para>

</doc>
