<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html  xmlns="http://www.w3.org/1999/xhtml" xml:lang="ja" lang="ja">
<!-- generated by to_html.pl from try.xml -->
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<title>Exception handling</title>
	<meta name="author" content="W.Dee" />
	<meta http-equiv="Content-Style-Type" content="text/css" />
	<meta http-equiv="Content-Script-Type" content="text/javascript" />
	<link href="browser.css" type="text/css" rel="stylesheet" title="吉里吉里関連リファレンス用標準スタイル" />
	<link href="mailto:dee@kikyou.info" rev="Made" />
	<link href="index.html" target="_top" rel="Start" title="トップページ" />
</head>
<body>
<h1><a id="id375" name="id375">Exception handling</a>
</h1><div class="para"><div>
　An <a id="id376" name="id376" class="targanchor"><dfn>exception</dfn></a> is a so-called &quot;exception&quot; that cannot be considered in normal processing, and is often considered the same as an &quot;error&quot;.<br />
</div></div>
<h1><a id="id377" name="id377">Where the exception occurs</a>
</h1><div class="para"><div>
　Exceptions can occur anywhere in the program.<br />
　Raising an exception is also called &quot;throwing an exception&quot;.<br />
　For example, suppose the following script caused an error:<br />
<br />

<br />
<code class="bq"><span class="weak">例:</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&quot;3%0&quot;!;&nbsp;<span class="comment">//&nbsp;&quot;Division&nbsp;by&nbsp;zero&nbsp;attempted&quot;&nbsp;exception</span></code>
<br />

<br />
　In some cases, exceptions may be raised explicitly, but in other cases they may or may not be known.<br />
</div></div>
<h1><a id="id378" name="id378">Catching exceptions</a>
</h1><div class="para"><div>
　You can catch exceptions using the <code class="inlinecode"><a id="id379" name="id379" class="targanchor"><dfn>try</dfn></a></code> (try) keyword and the <code class="inlinecode"><a id="id380" name="id380" class="targanchor"><dfn>catch</dfn></a></code> (catch) keyword.<br />
　For example, to catch the exception that might be raised in the above example, you could write a script like the following:<br />
<br />

<br />
<code class="bq"><span class="weak">例:</span><br />&nbsp;&nbsp;&nbsp;&nbsp;try&nbsp;<span class="comment">//&nbsp;Because&nbsp;an&nbsp;exception&nbsp;might&nbsp;be&nbsp;raised</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;{<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;func1();&nbsp;<span class="comment">//&nbsp;Here&nbsp;may&nbsp;raise&nbsp;an&nbsp;exception</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;}<br />
&nbsp;&nbsp;&nbsp;&nbsp;catch&nbsp;<span class="comment">//&nbsp;Catching&nbsp;exceptions</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;{<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;This&nbsp;is&nbsp;executed&nbsp;when&nbsp;an&nbsp;exception&nbsp;occurs</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;inform(&quot;Unable&nbsp;to&nbsp;load&nbsp;image.&quot;);&nbsp;<span class="comment">//&nbsp;Show&nbsp;message</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;}<br />
</code>
<br />

<br />
　In this way, if you write a process that may raise an exception in the try block, you can execute the catch block when an exception occurs. You can write error handling this way.<br />
<br />
　If no exception occurs in the try block, the catch block is not executed.<br />
<br />
　You can write anything in a try block. As in this example, there may be an exception on the line clearly, but if an exception occurs in the function call or after the function call, write try ... catch You can come back here when the exception occurs.<br />
<br />
　If an exception occurs, the rest of the block is interrupted and returns to the location of the try.<br />
<br />
　If the exception occurs again in the catch block, the exception will not be caught at this location. The exception is traced back to the function call, etc., and if the exception has been caught by try elsewhere, it is caught there.<br />
<br />
　After the exception is thrown, another exception may occur while arriving at the catch block, but the behavior is undefined.<br />
<br />
　If the exception is not caught anywhere in the script, the exception is passed straight through the script to the application where it is processed.<br />
<br /><div class="note"><div class="notehead"><span class="noteheadspan">Note</span></div>
Normally, such exceptions interrupt the execution as an error, so it is recommended that you write try ... catch where possible where an error is likely.</div><br />
</div></div>
<h1><a id="id381" name="id381">Exception object</a>
</h1><div class="para"><div>
　Various information about the exception is thrown along with an object of class <a id="id382" name="id382" class="targanchor"><dfn>Exception</dfn></a>. This object is called an exception object. This can be received in catch.<br />
　For example, you can write the following script:<br />

<br />
<code class="bq"><span class="weak">例:</span><br />&nbsp;&nbsp;&nbsp;&nbsp;try<br />
&nbsp;&nbsp;&nbsp;&nbsp;{<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;loadImages(&quot;nothing.jpeg&quot;);&nbsp;<span class="comment">//&nbsp;Processing&nbsp;that&nbsp;may&nbsp;raise&nbsp;an&nbsp;exception</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;}<br />
&nbsp;&nbsp;&nbsp;&nbsp;catch&nbsp;(e)&nbsp;<span class="comment">//&nbsp;catch&nbsp;exception&nbsp;in&nbsp;variable&nbsp;e</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;{<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;e.message&nbsp;represents&nbsp;the&nbsp;message&nbsp;string&nbsp;thrown&nbsp;with&nbsp;the&nbsp;exception.</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;This&nbsp;may&nbsp;explain&nbsp;why&nbsp;the&nbsp;exception&nbsp;occurred.</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;inform(&quot;Unable&nbsp;to&nbsp;load&nbsp;image.\n&quot;+e.message);<br />
&nbsp;&nbsp;&nbsp;&nbsp;}<br />
</code>
<br />

　In this way, you can write the variable to be received in parentheses after the catch, and receive the exception object in that variable.<br />
　The scope of this variable begins and ends with the block following the catch. This variable does not need to be declared previously.<br />
</div></div>
<h1><a id="id383" name="id383">throw statement</a>
</h1><div class="para"><div>
　You can also throw exceptions. Use the <code class="inlinecode"><a id="id384" name="id384" class="targanchor"><dfn>throw</dfn></a></code> keyword to throw an exception.<br />
　For example, you can write the following script:<br />

<br />
<code class="bq"><span class="weak">例:</span><br />&nbsp;&nbsp;&nbsp;&nbsp;function&nbsp;pow2(n)<br />
&nbsp;&nbsp;&nbsp;&nbsp;{<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;Calculate&nbsp;2&nbsp;to&nbsp;the&nbsp;nth&nbsp;power&nbsp;n&nbsp;must&nbsp;be&nbsp;a&nbsp;positive&nbsp;integer</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(n&lt;0)&nbsp;throw&nbsp;new&nbsp;Exception(&quot;Negative&nbsp;numbers&nbsp;cannot&nbsp;be&nbsp;specified.&quot;);<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;↑&nbsp;Raise&nbsp;an&nbsp;exception</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;1&lt;&lt;n;<br />
&nbsp;&nbsp;&nbsp;&nbsp;}<br />
</code>
<br />

　If a negative number, such as -1, is passed as an argument to this function, an exception is raised. The following statement throws the exception:<br />
<br />

<br />
<code class="bq">throw&nbsp;new&nbsp;Exception(&quot;Negative&nbsp;numbers&nbsp;cannot&nbsp;be&nbsp;specified.&quot;);</code>
<br />

<br />
　Regarding <code class="inlinecode">new Exception(&quot;Negative number cannot be specified&quot;)</code>, it creates an object of class Exception with a string as an argument. See the Exception class for details. And throw this newly created object with the throw keyword.<br />
　Throwing with the throw keyword is not necessarily an Exception class object. You can throw a reference to a function, either a number or a string. However, it is recommended that you throw an object of the Exception class, or a class derived from it. The reason is that you only need to assume that an Exception class object will come in the catch block when you catch it.<br />
</div></div>
<h1><a id="id385" name="id385">Throw the exception again</a>
</h1><div class="para"><div>
　It's nice to catch the exception with catch, but a try that might still catch the exception might be declared somewhere, and in such a case you can throw the exception again.<br />
　You can write the following script.<br />

<br />
<code class="bq"><span class="weak">例:</span><br />&nbsp;&nbsp;&nbsp;&nbsp;function&nbsp;tryloadimage()<br />
&nbsp;&nbsp;&nbsp;&nbsp;{<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;try<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;primaryLayer.loadImages(&quot;test1.bmp&quot;);&nbsp;<span class="comment">//&nbsp;Read&nbsp;test1.bmp</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;catch(e)<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;inform(&quot;Image&nbsp;loading&nbsp;failed.&quot;);<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;throw&nbsp;e;&nbsp;<span class="comment">//&nbsp;Print&nbsp;message&nbsp;but&nbsp;throw&nbsp;exception&nbsp;again</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br />
&nbsp;&nbsp;&nbsp;&nbsp;}<br />
<br />
&nbsp;&nbsp;&nbsp;&nbsp;function&nbsp;test()<br />
&nbsp;&nbsp;&nbsp;&nbsp;{<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;A&nbsp;function&nbsp;that&nbsp;calls&nbsp;tryloadimage&nbsp;and&nbsp;returns&nbsp;true&nbsp;if&nbsp;the&nbsp;image&nbsp;was&nbsp;loaded&nbsp;successfully,&nbsp;otherwise&nbsp;returns&nbsp;false</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;try<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tryloadimage();<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;catch<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;false;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;true;<br />
&nbsp;&nbsp;&nbsp;&nbsp;}<br />
</code>
<br />

　If test() is called here and the image reading fails, a message is displayed by the inform method, but an exception is thrown again, so it can be caught by the catch in the test function.<br />
</div></div>
	<script type="text/javascript" charset="UTF-8" src="documentid.js" ></script>
	<script type="text/javascript" charset="UTF-8" src="postcontent.js" ></script>
</body>
</html>
