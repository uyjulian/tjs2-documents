<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html  xmlns="http://www.w3.org/1999/xhtml" xml:lang="ja" lang="ja">
<!-- generated by to_html.pl from pp.xml -->
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<title>preprocessor</title>
	<meta name="author" content="W.Dee" />
	<meta http-equiv="Content-Style-Type" content="text/css" />
	<meta http-equiv="Content-Script-Type" content="text/javascript" />
	<link href="browser.css" type="text/css" rel="stylesheet" title="吉里吉里関連リファレンス用標準スタイル" />
	<link href="mailto:dee@kikyou.info" rev="Made" />
	<link href="index.html" target="_top" rel="Start" title="トップページ" />
</head>
<body>
<h1><a id="id275" name="id275">preprocessor</a>
</h1><div class="para"><div>
　TJS2 can process <a id="id276" name="id276" class="targanchor"><dfn>conditional compile expression</dfn></a> (corresponding to C #if and #endif). This is processed before the script is actually interpreted, and can be made to cause parts of the script not to be interpreted, or to be interpreted, depending on conditions.<br />
　Unlike the C preprocessor directives, the conditional compilation style is freestyle and can be written anywhere. There is no need to write only one directive per line, as in the C directive.<br />
</div></div>
<h1><a id="id277" name="id277">@set directive</a>
</h1><div class="para"><div>
　The @set directive evaluates a conditional compilation expression and discards the result. The syntax is as follows:
<br />
<code class="bq">&nbsp;&nbsp;&nbsp;&nbsp;@set(expression)<br />
</code>
<br />

　In &quot;expression&quot;, write a conditional compilation expression. The following operators can be used here.<br />

<br />
<code class="bq">&nbsp;&nbsp;&nbsp;&nbsp;,&nbsp;&nbsp;=&nbsp;&nbsp;!=&nbsp;&nbsp;==&nbsp;&nbsp;||&nbsp;&nbsp;&amp;&amp;&nbsp;&nbsp;|&nbsp;&nbsp;^&nbsp;&nbsp;&amp;&nbsp;&nbsp;&lt;&nbsp;&nbsp;&gt;&nbsp;&nbsp;&lt;=&nbsp;&nbsp;&gt;=&nbsp;&nbsp;+&nbsp;&nbsp;-&nbsp;&nbsp;%&nbsp;&nbsp;*&nbsp;&nbsp;/&nbsp;&nbsp;!&nbsp;&nbsp;+&nbsp;&nbsp;-&nbsp;&nbsp;(&nbsp;)<br />
</code>
<br />

　See <a target="main" class="jump" href="expr_and_op.html">Expressions and operators</a> for the meaning of these operators. However, only data types that can be handled are integers.<br />
　In addition, any variables and immediate values can be used. Regarding the naming rules of variable names, the same rules as those of <a target="main" class="jump" href="token.html">token</a> are used.<br />
　However, variables used in the preprocessor do not interfere with variables used in the TJS2 script (they do not share the same namespace).<br />
</div></div>
<h1><a id="id278" name="id278">@if directive, @endif directive</a>
</h1><div class="para"><div>
　The @if directive evaluates a conditional compilation expression, and if the result is 0, does not interpret between them until the next @endif. A non-zero result is interpreted.<br />
　The syntax is as follows:<br />

<br />
<code class="bq">&nbsp;&nbsp;&nbsp;&nbsp;@if(expression)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;...&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@endif<br />
</code>
<br />

&nbsp;&nbsp;&nbsp;&nbsp;In &quot;expression&quot;, specify a conditional compilation expression. @if and @endif can be nested.<br />
<br />

<br />
<code class="bq"><span class="weak">例:</span><br />&nbsp;&nbsp;&nbsp;&nbsp;@if(flag==0)&nbsp;&nbsp;<span class="comment">//&nbsp;Variables&nbsp;that&nbsp;have&nbsp;not&nbsp;yet&nbsp;been&nbsp;assigned&nbsp;are&nbsp;considered&nbsp;to&nbsp;be&nbsp;0</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@set(flag=1)<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;****<br />
&nbsp;&nbsp;&nbsp;&nbsp;@endif<br />
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;↑&nbsp;Compile&nbsp;the&nbsp;script&nbsp;written&nbsp;in&nbsp;****&nbsp;only&nbsp;once</span><br />
<br />
&nbsp;&nbsp;&nbsp;&nbsp;@if(version&gt;=0x02040009)<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@if(flag)<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;****<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@endif<br />
&nbsp;&nbsp;&nbsp;&nbsp;@endif&nbsp;<br />
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;↑&nbsp;Compile&nbsp;****&nbsp;part&nbsp;only&nbsp;when&nbsp;version&nbsp;is&nbsp;0x02040009&nbsp;(2.4.9)&nbsp;or&nbsp;more&nbsp;and&nbsp;flag&nbsp;is&nbsp;other&nbsp;than&nbsp;0</span><br />
</code>
<br />

</div></div>
<h1><a id="id279" name="id279">Predefined variables</a>
</h1><div class="para"><div>
　The <a id="id280" name="id280" class="targanchor"><dfn>version</dfn></a> variable represents the current TJS2 version.<br />
<br />
　As a number, the format is 0x0XYYZZZZ in hexadecimal, where X is the major version, YY is the minor version, and ZZZZ is the release number. For example, if it is 0x02040009, the version is 2.4.9.</div></div>
	<script type="text/javascript" charset="UTF-8" src="documentid.js" ></script>
	<script type="text/javascript" charset="UTF-8" src="postcontent.js" ></script>
</body>
</html>
